tinymce.PluginManager.add("spoiler",function(e,t){function o(){var t=e.selection,o=t.getNode();o&&(e.undoManager.transact(function(){var e=t.getContent();e||(e="Spoiler text."),t.setContent('<div class="spoiler" contenteditable="false"><div class="spoiler-toggle">'+i+' </div><div class="spoiler-text" contenteditable="true">'+e+"</div></div>")}),e.nodeChanged())}function n(){console.log(e.contentCSS);var t=e.selection,o=t.getNode();o&&"spoiler"==o.className&&(e.undoManager.transact(function(){var e=document.createElement("p");e.innerHTML=o.getElementsByClassName("spoiler-text")[0].innerHTML,o.parentNode.replaceChild(e,o)}),e.nodeChanged())}e.contentCSS.push(t+"/css/spoiler.css");var i=e.getParam("spoiler_caption","Spoiler!");e.addButton("spoiler-add",{tooltip:"Add spoiler",image:t+"/img/eye-blocked.png",onclick:o}),e.addMenuItem("spoiler-add",{text:"Add spoiler",context:"format",onclick:o}),e.addButton("spoiler-remove",{tooltip:"Remove spoiler",image:t+"/img/eye-plus.png",onclick:n}),e.addMenuItem("spoiler-remove",{text:"Remove spoiler",context:"format",onclick:n})});