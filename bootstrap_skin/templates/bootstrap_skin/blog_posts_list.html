{% extends "bootstrap_skin/blog_base.html" %}
{% load i18n %}
{% load static %}
{% load blog_tags %}
{% load bootstrap_skin_tags %}
{% block title %}
  {% if page_title %}
    <title>{{ page_title }} - {% get_site_name %}</title>
  {% else %}
    <title>{% trans "Home" %} - {% get_site_name %}</title>
  {% endif %}
{% endblock title %}
{% block blog_page_body %}
  <div class="post-list">
    {% if page_title %}
      <div class="page-header"><h1>{{ page_title }}</h1></div>
    {% endif %}
    {% for post in posts %}
    <div class="post-summary">
      <h2><a href="{{ post.get_absolute_url }}">{{ post.title }}</a></h2>
      <p class="text-muted">
        <small><span class="glyphicon glyphicon-calendar"></span>&nbsp;<em>{{ post.date_published }}</em></small>
      </p>
      {% if post.cover_image %}
      <p>
        <img class="img-responsive" src="{% get_media_prefix %}{{ post.cover_image }}" alt="{% trans "Cover Image" %}">
      </p>
      {% endif %}
      <p class="text-just">{{ post.content|striptags|truncatewords:40 }}</p>
      <p>
        <a class="btn btn-default btn-sm" href="{{ post.get_absolute_url }}">
          {% trans "Read more" %}&nbsp;<span class="glyphicon glyphicon-arrow-right"></span>
        </a>&nbsp;
        {% if post.allow_comments %}
        <a class="btn btn-default btn-sm" href="{{ post.get_absolute_url }}#comment">
          {% trans "Comment" %}&nbsp;<span class="glyphicon glyphicon-comment"></span>
        </a>&nbsp;
        <a href="{{ post.get_absolute_url }}#disqus_thread"></a>&nbsp;
        {% endif %}
        <small><span class="glyphicon glyphicon-tags"></span>&nbsp;&nbsp;
          {{ post|render_post_categories|safe }}
        </small>
      </p>
      <hr>
    </div>
    {% empty %}
      <h3 class="text-danger">{% trans "This blog has no posts." %}</h3>
    {% endfor %}
    <nav>
      <ul class="pager">
        <li class="previous {% if not page_obj.has_next %}disabled{% endif %}">
          <a href="{{ request.path }}{% if page_obj.has_next %}?page={{ page_obj.next_page_number }}{% endif %}">
            <span aria-hidden="true"><span class="glyphicon glyphicon-arrow-left"></span></span> {% trans "Older" %}
          </a>
        </li>
        <li class="next {% if not page_obj.has_previous %}disabled{% endif %}">
          <a href="{{ request.path }}{% if page_obj.has_previous %}?page={{ page_obj.previous_page_number }}{% endif %}">
            {% trans "Newer" %} <span aria-hidden="true"><span class="glyphicon glyphicon-arrow-right"></span></span>
          </a>
        </li>
      </ul>
    </nav>
  </div>
{% endblock blog_page_body %}
{% block footer %}
  {{ block.super }}
  <script id="dsq-count-scr" src="//{% get_disqus_shortname %}.disqus.com/count.js" async></script>
{% endblock footer %}