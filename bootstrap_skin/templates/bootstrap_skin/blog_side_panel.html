{% load i18n %}
{% load blog_tags %}
{% captureas home_url %}{% url "blog:home" %}{% endcaptureas %}
{% get_posts_digest False as latest_posts %}
{% if latest_posts.objects and request.path != home_url %}
  <div class="panel panel-default">
    <div class="panel-heading"><h4 class="panel-title"><span class="fa fa-newspaper-o"></span>&nbsp;{% trans "Latest Posts" %}</h4></div>
    <div class="panel-body">
      {% for post in latest_posts.objects  %}
      <p><a href="{{ post.get_absolute_url }}">{{ post.title }}</a><br>
      <small class="text-muted"><span class="glyphicon glyphicon-calendar"></span>&nbsp;<em>{{ post.date_published }}</em></small></p>
      {% endfor %}
      {% if latest_posts.more  %}
      <p><a href="{{ latest_posts.more }}"><strong>{% trans "More..." %}</strong></a></p>
      {% endif %}
    </div>
  </div>
{% endif %}
{% get_posts_digest True as featured_posts %}
{% if featured_posts.objects %}
<div class="panel panel-default">
  <div class="panel-heading"><h4 class="panel-title"><span class="glyphicon glyphicon-star-empty"></span>&nbsp;{% trans "Featured Posts" %}</h4></div>
  <div class="panel-body">
    {% for post in featured_posts.objects  %}
    <p><a href="{{ post.get_absolute_url }}">{{ post.title }}</a><br>
    <small class="text-muted"><span class="glyphicon glyphicon-calendar"></span>&nbsp;<em>{{ post.date_published }}</em></small></p>
    {% endfor %}
    {% if featured_posts.more  %}
    <p><a href="{{ featured_posts.more }}"><strong>{% trans "More..." %}</strong></a></p>
    {% endif %}
  </div>
</div>
{% endif %}
{% captureas archive_url %}{% url "blog:archive" %}{% endcaptureas %}
{% get_archive_digest as months %}
{% if months and request.path != archive_url %}
<div class="panel panel-default">
  <div class="panel-heading"><h4 class="panel-title"><span class="fa fa-archive"></span>&nbsp;{% trans "Archive" %}</h4></div>
  <div class="panel-body">
    {% for month in months.objects %}
    <p><a href="{% url "blog:month_archive" year=month.year month=month.month %}">{{ month|date:"F Y" }}</a></p>
    {% endfor %}
    {% if months.more %}
    <p><a href="{% url "blog:archive" %}"><strong>{% trans "More..." %}</strong></a></p>
    {% endif %}
  </div>
</div>
{% endif %}
{% get_categories as categories %}
{% if categories %}
<div class="panel panel-default">
  <div class="panel-heading"><h4 class="panel-title"><span class="glyphicon glyphicon-tags"></span>&nbsp;&nbsp;{% trans "Categories" %}</h4></div>
  <div class="panel-body">
    {% for category in categories  %}
    <p><a href="{{ category.get_absolute_url }}">{{ category.name }}&nbsp;<span class="badge">{{ category.posts.count }}</span></a></p>
    {% endfor %}
  </div>
</div>
{% endif %}
